use archivelib::{
  CompressionLevel,
  support::{BitwiseReader, debug::io::MatchingWriter},
};

#[macro_use]
mod utils;

test_match_sys_decompress! {
  // SHA1 of data: 696a34af1fc31e073ce7a3b6bb6bae2bfb47917d
  stitch_attrs => hex!("
      00 18 40 68 61 B5 FF 0D  9F 43 D1 10 BC A0 CB 89  DA 80 16 77 00 01 B6 7B  39 F0
  "),
  // SHA1 of data: a110d937c28a467051ca1ab0c9e04e351238e9cc
  x_coords => hex!("
      09 C3 7C B7 EE 49 DC E7  FC 14 01 00 00 00 00 41  8A AC 92 7B ED BB 73 37  36 E6 5E 05 E1 5E 8B 7E
      E8 0E F1 AF 43 96 DF BD  E9 24 8A AA A8 00 20 8A  80 80 AF EF EB 3D 96 F0  2D E0 EF 5A FA BA E4 92
      C6 98 DF AF 7F 7F 4B 16  36 CD FC F8 55 25 4F 6E  9D 93 9D 55 6E A3 58 35  63 89 54 3D 76 AA FF E5
      CA DF 22 29 EC A8 26 82  B8 97 C4 BA A3 1B 99 16  C6 27 A1 7C FB 2B 2E 14  91 7F 1E 59 3C 72 E2 CF
      8B 3E 1C F8 74 60 D0 2A  E0 D2 15 EE 83 0F 6D 1F  CD A2 F9 73 18 7B 27 B2  81 9C 10 91 28 D2 DA 8C
      88 7F A4 7C A2 B5 18 C3  66 24 C2 D4 E2 4E 15 21  56 15 A0 5A 4A A7 24 9E  A5 D8 65 67 52 79 A7 07
      39 7F 4D FD 5E 1A 85 5E  CB 5D ED 7D F2 DE 0C 2E  BC E4 0D 46 CE D6 37 2D  32 BD 0B E4 4C E5 F0 33
      79 9C 0B 9C AA 08 E5 68  B3 14 41 A4 9C 4A 5D 91  68 99 EE 31 0E 64 E9 EF  52 65 A5 5E 50 AE E5 85
      FA EF 53 BA FF 38 77 A9  C1 3F F8 83 55 5D FD EF  0C 22 FE 77 2D 2A D3 29  C5 0A AE 55 87 A9 32 55
      BA BD C8 92 0A D9 7B 95  81 AD 6D EB BB AB B2 D6  D6 C6 9E 65 E6 20 5E 05  A2 56 25 82 F6 1F 65 F6
      82 AC BC 1B 2F B0 F8 B6  CC 9A 84 B6 B8 F5 ED 57  F4 E0 D3 DC 47 C1 5D 65  12 0E F3 1B 57 91 69 93
      E0 97 14 28 3E 93 6B 2F  99 5D 6D DA 1C 81 88 EA  55 86 72 00 9E 74 78 27  32 93 27 32 B2 31 1B 00
      07 AD 22 C2 FD 25 56 55  AA B6 7F 24 F6 5E CD 87  2D FC F7 B4 BB A9 CD 2E  E9 70 13 BA 1D D1 7B 3D
      EC C1 5A 8A AB 91 95 5C  AC BB 0A E8 47 52 7A 90  35 AB 7D 49 E7 72 A3 69  43 82 80 F4 31 1B 51 37
      03 8F B8 FB BB 2F 6C F0  A1 0E 81 B7 B9 BD 77 F3  60 CC 15 CB 87 26 3F 8C  59 30 E4 C1 97 06 5B F9
      BC 01 07 2B 9E F6 87 73  BA 17 BB 9E EF F1 38 73  BA 14 83 25 29 40 F1 D3  92 59 AC 98 6E 24 D0 B3
      F7 B3 62 CB E3 F3 E3 F3  E5 F1 F9 5E 7F 1E 42 CA  1A 60 B2 63 C9 F9 DD EF  AF E7 F0 B5 C2 5F EA 79
      FA DB 7D B7 AE 82 6D FB  AF 39 B1 DD 77 B5 5E D5  E1 A7 C3 4D FD 17 F4 60  CF 83 B5 B8 B2 E3 C9 E5
      F1 E1 A5 88 90 E0 47 3A  87 AD 1E 29 81 7A BC AB  C8 CC 6D 09 6D ED 7C 4D  C3 74 4E F3 CE EC F0 14
      2E 84 5F 07 70 26 3B DF  CF D7 CF D7 D3 EF F6 FB  FE 9F B7 E9 B2 78 77 C1  2D 08 E9 BF 97 17 CF 97
      BF A7 B7 A7 6A F9 E4 C7  9B 0E 8B DB 2F 3D 76 16  63 08 59 99 4D E2 2A 8E  A8 CA CB E8 02 68 E3 11
      D0 BA CC A5 0E 29 4C AC  AB ED 66 16 E0 BB DB AC  13 62 11 BC 45 3F 61 8F  1A E5 7D 78 90 73 07 B4
      94 59 F7 C1 55 03 F2 26  DF 14 B6 AF 0B 30 33 13  11 31 1A FB 56 EC 95 95  49 54 DC 9E E4 E5 54 0E
      63 8E 1C A9 D2 DA B4 2B  C2 BC 0B C2 10 C7 1A 9B  41 46 2B D3 90 49 42 67  B5 4A 5B D2 08 41 47 8A
      33 A1 40 91 F4 89 A0 B9  CC BE 65 F4 20 6B 63 88  F2 EA 57 42 B9 97 65 CE  65 74 24 34 BA 7E 93 1E
      65 FB 1A 41 8A 6D 3D 24  53 EF E7 C9 C4 5A 6D 3E  5C 9A D8 03 C0 0F 41 18  B0 2F 12 D1 A9 22 52 A1
      31 DC 0C 9C AA 48 AA D5  83 74 E6 35 76 AA B7 49  33 97 C4 BE 06 4C 6C A7  C8 8E D4 63 4A 25 5F 5F
      63 5A 5C D1 7B 2D FC B8  3E 71 7C 63 F7 F1 F8 05  F3 8F E7 1E 4C 59 71 65  C2 05 DF 86 AF 0D 6E EC
      71 F6 E2 66 36 24 5B 72  9B D3 13 76 0D 99 A0 29  14 11 41 6E D0 F6 C1 AD  2E 90 72 26 53 70 01 12
      2F 1B 30 B5 08 40 70 93  CE 3D 74 8A 3F 9F 53 2B  B5 48 D4 DC E9 73 A9 74  0F 41 1C 07 9A AE AD 9C
      89 7B CD 98 E9 50 90 48  19 6D A9 46 9C 6A 45 4F  1B 83 DA 23 A9 5C EE 59  72 B3 2B 36 A3 49 A8 AB
      09 22 45 B6 37 AC 39 08  1A 85 88 97 8C 14 4C 42  79 9D 4C 9D 38 58 7D 97  D8 80 10 5A C8 AF 81 80
      21 FB 5E 4D 5F CB AA 07  94 7B 1D 06 E2 3D 00 05  F1 57 63 9B 1C 08 A9 74  22 AD DD 6E 85 5C 01 22
      E8 B5 43 5C 5A 22 8C 57  75 32 6F AF A7 B7 9F B8  A3 DB C8 56 FB 86 31 57  B6 5F 1F 9F A0 B3 27 7A
      E3 D1 7D EB B1 31 B9 4E  04 EB 97 3F 4E 07 0C C1  AD A2 BD 37 38 09 17 39  53 93 40 20 B4 08 81 3E
      FB 84 FC A3 1A 71 2B 02  CF B0 F3 3B 1B 11 1D 9F  C3 30 12 19 30 FC E2 FA  E7 7B 73 61 84 4B 16 6E
      E4 B5 ED 8E 40 DC 2D 08  94 99 3E 02 8E 3B 96 04  71 8D DC 90 18 90 83 E0  0E 45 08 1D 48 B5 5D CA
      BF F7 A2 4A 16 CB B9 A0  8A 8A 88 41 A3 FC 6D EF  83 87 C5 05 A8 93 8D D0  26 09 38 54 81 48 54 85
      57 D6 7D 67 98 D6 CE B6  36 2F B1 8D 8C 6B 6B 55  DD 0D E9 BF F3 87 DF C7  D8 4B CB D7 D3 F1 E8 15
      FB 76 06 00 02 C9 8F 2E  1D 17 F4 84 14 BF 74 4C  96 D1 32 8A 70 46 71 47  09 FC 8D 08 DB 14 63 0A
      35 EC 33 91 D5 1D 2B 11  B3 C1 2D 7E 1A 6F E8 C1  9B 16 42 DF CB 57 20 6D  C1 B5 08 F2 B0 CA 8E 08
      4C 46 74 B8 A9 BD 59 97  95 98 EE C7 77 4E 38 2F  7B 7E 9F 3E 7F B7 EE FF  1F BF FB 7F DF F7 FD D5
      5B C7 6F 91 3C 89 E6 59  0D A4 C9 EC E9 93 66 ED  A6 75 2E C3 A0 BB A3 B0  7D 97 06 6C 19 AF E8 F0
      CE 0B 47 86 8B DA 5D D4  E0 1A 2E E9 BD A1 6A 6D  D2 8C 37 B3 80 B1 F3 88  3E 9C 22 F9 F4 87 CB 9C
      2F 0C 37 B4 81 FB 59 36  0F C8 21 E4 50 FF DE B5  1D C8 EE 47 D0 84 E9 70  4F 82 9B 96 95 7D AD 43
      76 07 20 BA FB AF 3A FB  90 35 22 B3 1F 80 7E 5D  4E 1C CE A6 D0 3C E3 71  B7 62 5A B0 65 F1 14 15
      F7 82 FE E6 1E 6C 01 D5  7D 2C F8 73 62 12 CB DC  E1 C6 2F A7 E2 F4 76 EE  4C CB ED F7 89 3D 6E 6B
      BB B1 B2 79 11 59 3D 4A  E6 5F 3B 96 5C AC DE 47  89 88 9B E9 86 06 0A F6  BF 0D 58 33 F7 E2 43 A9
      CB 87 28 9E 01 41 C8 01  99 03 B3 CD 7F 3E 07 FA  71 2A 66 20 77 65 D8 58  DA BC 8A C8 BC 6B ED 5B
      6A F1 31 13 30 34 FB 50  32 4D 16 FA 17 D0 AE A1  09 83 DB B5 6A D8 E4 74  28 0B 73 E7 47 8A 41 D5
      B3 0B 60 F8 5D 79 C7 AE  89 6C 76 9D D5 4B 6F 93  6F 5F D3 83 3E 10 58 F2  79 7C F8 83 01 F4 F7 0A
      DE CF E0 5B EF E5 EF E5  ED E5 66 31 C9 6E C6 50  C0 31 BB F7 C5 C6 3A 24  44 D6 1A 70 7A 99 D8 D3
      EC 42 B4 4A C6 9C 88 EE  3F 79 93 95 49 15 8F CF  A0 D6 5A E4 4D 05 71 B9  BC D9 8E DC 7C 88 ED 4A
      34 E1 56 01 45 43 41 15  41 14 5A 5D CD 7F 20 3C  BF 38 C0 3D EC 82 25 B1  E5 C5 9F 06 9B FA 82 26
      9E 72 06 E2 67 6A F2 AB  32 7C 50 A1 0A 4D A8 CB  0B 08 96 20 1E 6E EF 15  22 78 91 E0 A7 05 22 6E
      35 FE 9D E1 0F A1 06 A0  40 F7 21 6E 91 47 EF A0  B2 CA 39 82 0E 1D 0B 47  8E 8C EB 6A 70 21 52 F0
      A1 A3 38 5F A1 DD 2E 04  35 39 A5 DF F6 98 37 D4  1F DF 6F 2F 7C 7F 18 FD  C0 0B F5 F3 12 FC 7A 7E
      3B 5E 18 7C FD 43 4F F1  E9 F7 FB 7D FE DF B7 FD  7B F9 66 BF AE EC 4B 4C  56 B9 A0 2A B5 6E 36 8B
      48 AF 5D AA 86 E7 D3 A7  31 AB B5 CA DF 2B 55 02  AC 34 3A D8 18 39 13 39  7C 0C DE 6F D0 40 A4 0B
      BC CE B6 F4 BB 9E F6 5B  F9 30 FC 62 ED DA 8A BE  20 C2 8B B1 F4 F5 F3 F6  F3 F7 EC 52 E5 C3 9B 0E
      8B FA EF 6C 08 C5 00 99  6D C0 13 70 4F 8A 33 A1  49 D5 5C E6 57 52 06 10  54 48 C4 D6 55 7F C3 9A
      76 2E 72 36 D0 24 55 3E  1B DE DE 5E BE 9F 71 36  FD AB F8 EC E4 FB 0B A5  04 1D 3F E6 FB E3 6A BB
      AE E8 55 BD 8D EB 16 17  04 14 E9 74 41 9F 6A F7  40 24 E6 BF 97 0E A7 20  66 44 B8 9B 5C 6F 51 61
      46 AC 8B 68 34 69 95 5B  9C AE 06 4D D9 E4 8D 20  48 ED 46 53 A6 37 7D CE  25 50 47 D0 1B D8 1E 22
      92 B8 99 BC ED C8 48 00  5C 2B BE C3 CC BC D7 6E  E8 3B C0 28 05 D9 5E D2  EE AE C6 CE CB AF B6 FB
      51 30 0F CA 7B D2 E0 84  E7 84 10 5C B0 1F 90 82  2B 76 86 27 A1 5C EE 58  65 66 58 60 F6 13 FF 83
      75 56 C7 0E 99 EB 26 46  DE 14 1A 58 7D 53 C5 0B  D7 39 AE 6B 94 D8 6C C2  EC 93 EC 94 89 48 82 29
      E0 5D F5 A0 56 15 61 16  16 76 2F 00 98 00 ED B5  0A 17 82 AF 07 7D 13 31  AF 22 D2 AB B9 3E 08 87
      7C 11 3A 21 D8 7B 56 87  23 A8 77 95 9B 51 B5 1D  4A 01 14 69 EF 53 72 D2  31 B5 88 2E BE E4 4D 67
      C5 A2 FB ED F7 8F 40 37  49 D3 14 C6 77 8E AD E9  08 C1 A0 FE 47 72 36 BB  9C CB E6 5F 42 86 B5 6C
      72 6B 3B 9D CD EA EF 52  26 A0 BA F0 77 E4 D3 8B  6D 1C 6B B1 5B 8E 27 76  E2 84 4F 1C CF D2 62 F6
      CA E9 39 D2 A3 DD CB DA  9E D4 A5 42 54 64 46 44  82 A8 CA 86 E3 A6 3F 72  1B AD 4F 11 34 AB B5 A8
      5B 08 3B 07 0B B3 88 AE  E5 04 A6 10 9A 96 F4 89  B4 6D 33 2B C1 2A 11 A5  00 47 D2 13 05 38 33 61
      2D E9 EF 4E 65 65 5B 6B  02 63 1F 07 44 25 DC 2B  0A F2 A5 3D 6A 0D FA FD  7B FA 8D FF FE
  "),
  // SHA1 of data: 65c5fde541315a99ce39fb7f6526c20fe060d699
  y_coords => hex!("
      09 87 7C EB FB C5 DB 1E  FF 88 00 00 21 24 9D 9D  EE EF D9 F5 B7 32 E6 F0  2D 78 11 B9 7F 25 E0 D7
      6E 5C CD CC F7 B7 DD EF  64 81 00 02 04 1F DF E9  EF 66 DF C9 78 D9 AB E7  2C DD 1A 43 7F 81 B5 FD
      FE 71 50 B6 0E 64 F6 D1  6D 7E 03 28 53 68 9C 6C  4C 44 BC 4C 76 6A 16 DF  6E 06 E0 6A 16 7B 32 19
      63 B0 BE 71 7D 21 B4 50  3E 96 A0 6D FD AF ED 7B  6B E7 D8 5D AA CA DF 67  60 DD 06 F7 F8 3F BD F2
      93 3B AB BD 1D 0C B9 D0  33 D4 3F 95 E6 E0 17 FC  B1 D9 7E C1 C4 F6 60 5A  43 D8 B6 AD AF B6 22 40
      B5 0C 54 C3 3C 60 5D 67  D2 8D 28 0B 35 1F 59 F5  6B A4 20 B4 A5 3A 72 A9  32 92 AD 1A F1 87 FD 4A
      9C FB 32 C1 19 DA 93 6F  6D CF F1 EA 92 02 A7 1F  0A F9 ED BD 45 DC 36 FB  50 07 C2 11 B7 9C E9 BB
      E7 87 BF A7 BF 1F 8E 1F  3B 9E DB 0E 37 E9 8A 74  35 16 F7 DD 81 C8 D9 9D  5A D1 20 74 CA 54 28 5C
      27 BE 5B A4 C6 82 F0 46  A5 69 5A 76 26 62 75 E8  5A 85 69 52 A5 2B 4E BD  73 AE 90 96 25 62 56 A3
      68 BC F9 CE BF 0D 9F 8F  A7 5D 7A FC 29 77 42 E3  B1 24 8C 5C A8 A6 F9 28  EA F4 3F 47 49 A5 20 72
      F3 2F 22 F3 2B 42 B4 24  6F F9 07 D8 13 CE B1 7D  65 68 5E 46 64 66 27 60  7D C8 77 54 CC 93 88 45
      38 5B 9A 92 60 2E E2 A4  45 2D 52 B5 AB E6 96 AD  40 AE 97 99 79 D7 95 89  18 8D 9D 60 7B 89 88 D7
      91 59 93 01 44 42 F9 D6  19 69 76 96 1E 4C D7 2F  4F 61 F6 AF 3B 53 35 42  F5 2D 5A D5 07 9A 97 A5
      7A 58 A1 99 F5 9E 3C 60  EC 4E C6 E4 5B A2 0F 70  81 EF D7 87 5E 3D 3D 3E  79 74 E1 F1 CB DF D7 DF
      97 C7 A0 4E 1D 37 73 DC  08 05 D8 FB 74 96 E2 F2  42 F4 AD 52 C5 2C 54 5C  98 71 EB D0 C4 EC CC D4
      AD C9 B4 38 B7 03 2E F6  DD 0E E8 77 C1 B5 CB 22  AA 72 8D 58 F6 4F 68 A5  70 CB 2D CA F1 64 FB 8C
      A1 29 14 91 50 46 61 3B  6B E6 25 A3 54 27 9D 7A  A5 18 41 2E 8A 79 4B 71  1C 31 F2 D6 AA 16 05 C1
      61 95 9D 50 4A CD 15 E5  DC AB 89 BC 8C 47 F0 36  5A 67 9E 79 0D E0 7C 76  5E 4D C5 77 F3 FD 46 5A
      50 F8 1C 03 52 20 5F EA  74 D7 E4 E9 44 0C 73 EF  3B 03 71 33 22 B4 D8 38  FB 06 27 32 FC 01 2F 7A
      3D D2 B1 50 0B 82 52 B9  09 10 45 D5 C2 3D C7 F9  FE 82 34 2B 23 30 3A F4  2D 02 6A C4 C1 27 AD 40
      13 82 28 26 62 46 64 66  36 A3 6A 26 FB 0A 35 D9  A8 80 A8 91 69 55 99 49  93 A1 1A 50 A8 0A AA C5
      5D 9A 57 86 DE 92 6B 71  DE B7 E4 72 F9 05 57 96  34 E4 B6 F3 0C BF 3D 3C  68 16 30 F8 06 42 0D E0
      61 7B C0 80 DE 37 8D 32  D3 2C F3 B6 4E 63 8E 6E  28 5C 8D E7 E0 68 92 8E  60 9F F5 4B E5 7D D3 A9
      05 1A A5 FD 39 3F BE 27  24 DB 23 72 B5 23 51 B6  10 55 13 31 B7 DB 6C 21  20 71 F7 5E DC F3 BE 64
      0C CA 95 87 21 F1 45 79  62 76 9C 51 DA 8A 16 E9  1F 7E 93 62 48 DC 50 24  6C F3 1B 11 0B 46 56 7D
      28 50 94 CA 48 B4 4C 42  D4 2D BE E7 57 5E 71 EF  3C 66 EE A1 C8 3F AC 16  D7 DD 81 CE DB 7B 39 08
      79 8D A9 59 9D 7A 41 6D  5A 97 74 2F 3F 13 7C 19  98 87 D2 08 18 91 0B 18  9D 79 F7 23 DC 09 EB 52
      FE 0A EA D2 A9 39 96 89  AD 45 46 E5 62 07 22 5E  16 62 5E 45 27 48 05 43  EB 37 EE 82 36 60 41 58
      A9 0C FE 36 A5 E9 B6 87  EC 8E D5 B7 B2 CF 17 22  4A 5E 14 2F 89 74 2D 0B  9C F8 FC 72 FD FD BE BF
      97 D3 F3 FA 7E 5F 5F CB  EA 4A 38 28 FF A7 DB F3  FA 7F 2F DB FA 7F BF EB  FE BF 4F D7 F4 FD 4A D2
      3E 9E D8 91 80 D9 67 A6  40 95 F2 02 3C 49 6C 34  5E 03 BE 87 DC 95 A9 5C  03 B8 57 80 35 8D B0 82
      08 1C 2B ED 00 82 CC AC  07 82 FA 82 CA 3B D5 BE  4D 3A AF 01 86 12 8E B4  BB 4A EF F7 F3 DC 9B 89
      EE 15 66 B0 15 D8 95 E8  2B FC CB 05 AC 7D 3A CA  10 14 9D 29 93 95 39 15  8D 58 97 EC BC 2B C2 C4
      0C BE D3 DB 7A 39 CF 78  0E 0D C2 BC A9 52 6D A4  A0 C9 EE A8 A9 66 E8 70  F6 9F 48 05 51 B1 10 12
      A0 70 08 30 62 35 E5 56  74 E8 4A A4 6A 42 C3 AC  36 D3 2E 2A F2 70 23 C0  F9 69 A7 82 30 26 E2 EC
      36 B3 E8 46 74 A5 F3 D7  AD D9 88 59 81 A7 DB 7B  6B CE 74 DD CF 7F CF 1F  7F 4F 7E 5E FE 9F 02 9C
      BD FD 7E DE DF 6F 5F 7F  6F 7F 5F 8E 5F 3C B9 F1  EB BD F7 61 DB 13 53 2F  5A 18 8D 97 A4 98 D0 55
      43 6C 47 62 49 36 BA 03  91 D6 EC 49 C7 BC 76 5A  35 57 2F 23 70 EE 7F 7B  C1 FE 50 6E 80 59 FC 6D
      76 17 41 11 B9 D9 99 5B  91 80 44 AA 02 25 46 E1  22 30 15 74 10 CC 3E C1  89 CC BF 28 94 11 3A 17
      20 08 A7 54 3F 60 22 DA  BF 88 8D 49 56 7D 68 5A  6E 3B 2E 2F 02 04 61 8F  81 5D CB B0 E7 CB BC A2
      E6 5A 75 67 52 94 E9 12  59 09 5A 21 35 D3 52 74  A1 6A 75 1D 7A 3D C0 DD  C8 AC C9 1C 62 71 26 99
      F9 DD 11 6B EF DA 89 03  F7 B8 A5 6E 22 ED EB 2D  E0 7C 00 BB C4 7C 08 08  2F 21 91 1A 77 13 70 1A
      F7 86 FC 46 F1 8F CC 97  19 E1 0B 92 B9 1B 90 C0  EC 4E F0 77 83 7C 1B 91  99 98 19 04 62 08 DC 9C
      58 28 AF DB F9 FD 3F FF  ED F9 FB FB 7C FA F3 F4  F9 F5 D4 5A E3 F7 82 1D  38 EB 90 21 BC F9 F9 72
      06 24 5A 58 3A DF ED B7  7A DC 5E 9B AC 9C ED B8  C2 07 2B 20 E7 71 3B 13  F0 3C 3A BD 7A 9C 85 D6
      97 9E BD 8F DE 09 54 96  16 E0 2B 8D 83 24 69 C0  B8 87 05 E2 2A E8 90 54  01 0E A7 1F 6F 8E 5C FD
      3A 70 EA EC 1B 60 75 ED  CF 3A FE D0 D2 DC 2C C2  D4 2C C4 BC 6B 48 A4 C9  4E 8D 27 D8 65 A5 5C 48
      80 C0 59 1A 09 66 08 16  C4 7A A7 7B 04 BB A5 DD  10 BE C2 5F AE 6F 42 F4  30 43 03 C3 28 60 5D 45
      2F 3A D4 0A 2B 4A 94 28  22 5E 75 28 4E 84 6C 3A  BF C2 AA D8 2E 5F 2C F3  CF 4C B1 F7 A1 E2 46 12
      03 0B 08 A0 0E 8A D4 40  D9 E6 C8 16 EF 36 F8 5E  FE 00 6B C4 FC BF 79 E5  A7 11 AD 61 16 99 6B 22
      E9 F0 FC 34 F8 A5 94 0E  A9 19 D4 91 68 98 85 A8  1A 81 B7 F6 BC EF 51 4D  FD 37 F4 E1 D3 7F 5D C2
      52 02 54 00 B5 DB 8D B8  DA 91 A9 58 98 14 B5 0B  54 A5 6A 58 0A 63 00 44  39 92 30 77 3E 54 A0 0E
      A0 A5 11 12 92 AD 4A 82  52 A8 AD 6A 01 36 50 A0  7B 0B 7A 91 26 24 2B 42  84 A5 54 0B D5 27 4C 5A
      EB 32 D2 C0 3E 23 C0 D9  E4 3E 3B 2F 27 B9 76 97  61 B5 9B 51 59 E7 0D B1  95 68 C5 FA B5 C9 97 54
      DC 50 0D 45 DB A9 41 DC  A0 D2 29 E7 49 96 19 AF  F9 1F 49 F4 A1 42 35 6C  05 29 88 97 C7 E2 00 7A
      30 1C 80 73 5F F7 39 05  D2 54 75 47 52 8D 00 63  50 7D 46 5A 68 C9 32 D2  2C A0 6E 83 77 1C 8E E8
      54 A4 EB 4A C4 8C C6 D0  80 30 8C C8 C4 AB CC 2B  48 51 3A 13 A5 20 88 85  A8 7D 87 5A 67 72 C0 AD
      15 90 1D 6E A8 0B 00 B3  AE 2B BE B6 75 67 D0 94  CA 48 AC 6B F6 04 85 E4  74 E9 BF 9F 01 2D 10 5B
      BE 9F 1C BD F9 7C 71 E6  03 F7 4D CF ED 89 8A 11  0B 03 C4 76 E1 A5 8A 35  EA C7 A2 6E 2A 6E 79 68
      08 23 FE FE 0B 84 13 BE  AB 14 16 3D E4 E3 7A 72  A6 25 3D F8 94 21 49 F5  1B A8 7E 5F 70 00 6E 26
      F2 30 D5 58 67 90 D9 79  4C 39 0C 71 3C 91 68 F6  72 32 CD 3B 9B 6A 52 35  D9 C7 F7 F5 E1 D3 D3 E7
      97 30 81 E7 8F 4E 3D 38  75 DE F6 F7 F7 04 72 07  03 3B 42 37 0B 70 B3 13  11 AD 22 B3 27 3A 21 D6
      1C 04 97 9E B8 16 1E BD  57 E0 E0 B8 BB 40 0D A9  0D 47 95 25 5A 35 C2 31  13 21 18 8D 89 17 04 36
      A8 21 73 F0 03 4F 0B 66  9F 0A 22 75 46 0F 65 05  2E 1E 19 6F 48 96 6D A2  0B 64 9B B9 64 0C 56 46
      78 30 17 71 79 16 0A 18  BC CA CC 59 2B 42 46 D8  31 23 0F B3 42 B2 36 F4  3B A5 62 B5 2D 43 13 37
      1E D8 DC EC E8 A4 3B A0  DE FF 07 B8 75 E3 D7 83  C1 68 3D BC 56 B7 5D CF  05 A8 13 5B 4B B0 A9 35
      E3 58 56 95 66 82 A5 1C  0D AF 06 56 7D 28 CC 9C  8B 48 82 C3 A9 13 3D BF  10 0D 58 36 81 AE E3 CE
      75 77 A6 EE 7C 3E 5D E9  ED F5 77 AF FF 7D 79 74  F6 F8 F6 F9 E5 D7 8B C5  E3 1F 69 E7 BF 17 12 77
      B8 F3 5F 03 AA 24 41 C8  B6 49 75 A5 2A D1 2F D9  80 CA F1 2D 12 A0 8A 43  32 29 28 19 32 89 1B AB
      1A D1 52 FF 84 EB 0B 2A  95 E8 5E 86 02 2E 1A 43  DC EC 84 0F 33 33 31 46  25 94 1B 62 6A 45 E6 56
      75 67 52 60 93 A7 3A 54  A1 4A 15 1F 51 F5 9D 61  B6 1A 26 66 22 68 14 E9  57 01 3D 9E 28 0D FD C6
      F3 FB FB 0D FF BF 00
  "),
}

#[cfg(feature = "ported")]
#[test]
fn test_x_coords_decompression_level_0_using_ported() {
  use archivelib::assert_bytes_eq;

  let sys_result = archivelib_sys::do_decompress_level(&x_coords::DATA, 0).unwrap();
  let ported_result =
    archivelib::ported::do_decompress_level(&x_coords::DATA, CompressionLevel::Level0).unwrap();

  assert_bytes_eq!(sys_result, &ported_result);
}

#[test]
fn test_x_coords_decompression_level_0_using_reimplemented() {
  let sys_result = archivelib_sys::do_decompress_level(&x_coords::DATA, 0).unwrap();

  archivelib::do_decompress_level_bitstream(
    BitwiseReader::new(&x_coords::DATA[..]),
    MatchingWriter::new(&sys_result),
    CompressionLevel::Level0,
  )
  .unwrap();
}
